{% extends "base.html" %}

{% block content %}

<h2 class="title">{{ bank_name }} Converter</h2>

<div id="dropzone" class="dropzone">
    <p>Drag & Drop PDF here<br>or click to browse</p>
    <p id="fileName" class="file-name"></p>

    <form id="uploadForm" method="post" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="pdf" accept="application/pdf" required hidden>
        <button type="submit" class="btn upload-btn">Convert</button>
    </form>
</div>

<a class="back-link" href="/">â¬… Back to Home</a>

<script>
// --- DRAG & DROP LOGIC ---
const dropzone = document.getElementById("dropzone");
const fileInput = document.getElementById("fileInput");
const form = document.getElementById("uploadForm");
const fileNameEl = document.getElementById("fileName");

// Clicking dropzone opens file dialog
dropzone.addEventListener("click", () => fileInput.click());

// STOP the Convert button from triggering the dropzone click
document.querySelector(".upload-btn").addEventListener("click", (e) => {
    e.stopPropagation();
});

fileInput.addEventListener("change", () => {
    if (fileInput.files.length > 0) {
        fileNameEl.textContent = "Selected: " + fileInput.files[0].name;
    }
});


// Drag over
dropzone.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropzone.classList.add("dragover");
});

// Drag leave
dropzone.addEventListener("dragleave", () => {
    dropzone.classList.remove("dragover");
});

dropzone.addEventListener("drop", (e) => {
    e.preventDefault();
    dropzone.classList.remove("dragover");

    const file = e.dataTransfer.files[0];

    if (file && file.type === "application/pdf") {
        fileInput.files = e.dataTransfer.files;
        fileNameEl.textContent = "Selected: " + file.name;
    } else {
        alert("Please upload a PDF file");
    }
});

</script>

{% endblock %}
